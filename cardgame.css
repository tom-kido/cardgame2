/* ========= 全体レイアウト ========= */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  user-select: none;
}
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden;
  height: 100vh;
  background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
}

/* ========= 背景 ========= */
.game-board {
  width: 100vw;
  height: 100vh;
  position: relative;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
}
.background-pattern {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 20%, rgba(96, 165, 250, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(167, 243, 208, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 90%, rgba(251, 191, 36, 0.05) 0%, transparent 50%);
  border-radius: 20px;
}

/* ========= プレイヤーエリア ========= */
.player1-area {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 45%;
  background: linear-gradient(to top, rgba(59,130,246,.1), transparent);
  border-top: 2px solid rgba(59,130,246,.3);
}
.player2-area {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 45%;
  background: linear-gradient(to bottom, rgba(239,68,68,.1), transparent);
  border-bottom: 2px solid rgba(239,68,68,.3);
  transform: rotate(180deg);
}

/* ========= 山札 ========= */
.deck-stack {
  position: absolute;
  width: 80px;
  height: 110px;
}
.deck-stack.player1 { left: 30px; bottom: 180px; }
.deck-stack.player2 { left: 30px; bottom: 180px; }

.deck-card {
  position: absolute;
  width: 80px;
  height: 110px;
  border: 2px solid;
  border-radius: 8px;
  cursor: pointer;
  transition: all .3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(0,0,0,.3);
  font-size: 12px;
  text-align: center;
}
.deck-card.player1 {
  background: linear-gradient(145deg, #4c1d95, #5b21b6);
  border-color: #7c3aed;
}
.deck-card.player2 {
  background: linear-gradient(145deg, #dc2626, #b91c1c);
  border-color: #ef4444;
}
.deck-card:hover { transform: translateY(-3px); }
.deck-card-2 { top: 5px; left: 5px; opacity: .8; }
.deck-card-1 { top: 10px; left: 10px; opacity: .9; }
.deck-card-top { top: 15px; left: 15px; z-index: 10; }

/* ========= 手札 ========= */
.hand-area {
  position: absolute;
  height: 120px;
  min-width: 400px;
  background: linear-gradient(145deg, rgba(30,41,59,.9), rgba(51,65,85,.9));
  border: 2px solid;
  border-radius: 12px;
  padding: 10px;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0,0,0,.3);
  left: 50%;
  transform: translateX(-50%);
}
.hand-area.player1 { bottom: 20px; border-color: rgba(59,130,246,.5); }
.hand-area.player2 { bottom: 20px; border-color: rgba(239,68,68,.5); }
.hand-label {
  color: #e2e8f0;
  font-size: 14px;
  text-align: center;
  margin-bottom: 8px;
  font-weight: 600;
}
.hand-cards { height: calc(100% - 30px); }

/* ========= 場エリア ========= */
.field-area {
  position: absolute;
  display: grid;
  grid-template-columns: repeat(5, 90px);
  grid-template-rows: repeat(2, 120px);
  gap: 10px;
  padding: 20px;
  background: linear-gradient(145deg, rgba(15,23,42,.8), rgba(30,41,59,.8));
  border: 2px solid rgba(100,116,139,.6);
  border-radius: 16px;
  backdrop-filter: blur(8px);
  box-shadow: 0 12px 40px rgba(0,0,0,.4);
  left: 50%;
  transform: translateX(-50%);
}
.field-area.player1 { bottom: 160px; }
.field-area.player2 { bottom: 160px; }
.field-slot {
  width: 90px;
  height: 120px;
  background: linear-gradient(145deg, rgba(71,85,105,.3), rgba(51,65,85,.3));
  border: 2px dashed rgba(148,163,184,.4);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transition: all .2s ease;
}
.field-slot.highlight {
  border-color: #22d3ee;
  background: linear-gradient(145deg, rgba(34,211,238,.2), rgba(6,182,212,.2));
  box-shadow: 0 0 20px rgba(34,211,238,.4);
}
.field-slot.occupied {
  border-style: solid;
  border-color: rgba(34,197,94,.6);
}

/* ========= 右列 ========= */
.right-column {
  position: absolute;
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.right-column.player1 { right: 30px; bottom: 180px; }
.right-column.player2 { right: 30px; bottom: 180px; }
.right-slot {
  width: 100px;
  height: 130px;
  background: linear-gradient(145deg, rgba(120,53,15,.4), rgba(146,64,14,.4));
  border: 2px dashed rgba(251,146,60,.5);
  border-radius: 10px;
  position: relative;
  transition: all .2s ease;
}
.right-slot.highlight {
  border-color: #f59e0b;
  background: linear-gradient(145deg, rgba(245,158,11,.3), rgba(217,119,6,.3));
  box-shadow: 0 0 20px rgba(245,158,11,.4);
}

/* ========= UI ========= */
.info-panel {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(145deg, rgba(17,24,39,.9), rgba(31,41,55,.9));
  border: 2px solid rgba(75,85,99,.6);
  border-radius: 12px;
  padding: 15px 25px;
  color: #f9fafb;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0,0,0,.3);
  text-align: center;
  z-index: 5;
}
.turn-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(145deg, rgba(34,197,94,.9), rgba(22,163,74,.9));
  color: #fff;
  padding: 15px 30px;
  border-radius: 12px;
  font-weight: bold;
  font-size: 18px;
  border: 2px solid rgba(34,197,94,.5);
  box-shadow: 0 8px 32px rgba(0,0,0,.4);
  z-index: 5;
}
.deck-count {
  position: absolute;
  top: 20px;
  background: linear-gradient(145deg, rgba(75,85,99,.9), rgba(55,65,81,.9));
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 12px;
  border: 2px solid rgba(107,114,128,.5);
  box-shadow: 0 4px 15px rgba(0,0,0,.3);
  z-index: 5;
}
.deck-count.player1 { left: 30px; }
.deck-count.player2 { right: 30px; }

.message-log {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(145deg, rgba(17,24,39,.95), rgba(31,41,55,.95));
  color: #22d3ee;
  padding: 8px 20px;
  border-radius: 8px;
  font-family: 'Courier New', monospace;
  font-size: 13px;
  border: 1px solid rgba(34,211,238,.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0,0,0,.4);
  max-width: 500px;
  text-align: center;
  z-index: 5;
}
.end-turn-btn {
  position: absolute;
  right: 20px;
  bottom: 20px;
  background: linear-gradient(145deg, #059669, #047857);
  color: #fff;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: all .3s ease;
  border: 2px solid rgba(16,185,129,.5);
  z-index: 5;
}
.end-turn-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16,185,129,.4);
}
.end-turn-btn:disabled {
  opacity: .5;
  cursor: not-allowed;
}
/* Phaserキャンバスを手札エリアより前面にする */
#phaser-root {
  position: absolute;
  inset: 0;
  z-index: 4;           /* 手札(2)より上、UI(5)より下 */
}

/* 手札エリアはキャンバスより後ろに固定 */
.hand-area {
  z-index: 2;
}

/* 既存のUIはキャンバスより前に残す（既に z-index: 5 ならOK） */
.info-panel,
.turn-indicator,
.deck-count,
.message-log,
.end-turn-btn {
  z-index: 5; /* 既に設定済みなら変更不要 */
}